# ./BE/Dockerfile
FROM python:3.11-slim

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1

WORKDIR /app

# (ì„ íƒ) ì‹œìŠ¤í…œ ì˜ì¡´ íŒ¨í‚¤ì§€
RUN apt-get update && apt-get install -y --no-install-recommends \
    build-essential curl && \
    rm -rf /var/lib/apt/lists/*

# ì˜ì¡´ì„± ì„¤ì¹˜ (requirements.txt ë˜ëŠ” pyproject.toml ì¤‘ ì‚¬ìš© ì¤‘ì¸ ë°©ì‹ì— ë§ì¶”ì„¸ìš”)
COPY requirements.txt /tmp/requirements.txt
RUN pip install --no-cache-dir -r /tmp/requirements.txt

# ğŸ”¥ í•«ë¦¬ë¡œë“œ ì•ˆì •í™”ë¥¼ ìœ„í•´ watchfiles(ë˜ëŠ” uvicorn[standard]) ì„¤ì¹˜ ê¶Œì¥
RUN pip install --no-cache-dir watchfiles uvicorn fastapi

# ê¸°ë³¸ì ìœ¼ë¡œ ì½”ë“œ íŒŒì¼ì€ ëŸ°íƒ€ì„ì— ë³¼ë¥¨ìœ¼ë¡œ ë§ˆìš´íŠ¸í•˜ë¯€ë¡œ COPY ìƒëµ ê°€ëŠ¥
EXPOSE 8000

# ì‹¤ì œ ì‹¤í–‰ì€ composeì˜ commandì—ì„œ ìˆ˜í–‰ (--reload)
